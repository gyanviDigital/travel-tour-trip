(()=>{"use strict";const{flextension:e}=window;let t=!1,n=!1;e.on("ready",((o,a)=>{a||(a=document),function(o){o.querySelectorAll(".post-share").forEach((o=>{o.addEventListener("click",(a=>{var r;a.preventDefault(),r=o.dataset.postId,new e.lightbox("#flext-share-buttons-content-"+r,{className:"flext-share-modal",fullscreen:!1}).load({endpoint:"/flextension/v1/share-buttons",data:{id:r},callback:(o,a)=>{a.content.innerHTML=o.rendered;const r=a.content.querySelector(".copy-clipboard");null!==r&&r.addEventListener("click",(()=>{const o=a.content.querySelector(".modal-permalink");if(null!==o){if(void 0!==e.currentClipboard){const t=e.currentClipboard.querySelector("i");null!==t&&(t.classList.remove("flext-ico-check"),t.classList.add("flext-ico-copy"))}!async function(e){t?n&&await navigator.clipboard.writeText(e):await navigator.permissions.query({name:"clipboard-write"}).then((o=>{t=!0,"granted"!==o.state&&"prompt"!==o.state||(n=!0,navigator.clipboard.writeText(e))}))}(o.value);const a=r.querySelector("i");null!==a&&(a.classList.remove("flext-ico-copy"),a.classList.add("flext-ico-check")),e.currentClipboard=r}})),e.emit("ready",a.content)}})}))}))}(a)}))})();